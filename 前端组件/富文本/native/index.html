<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>富文本编辑器</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Vue CDN -->
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
</head>

<body>
  <div id="app">
    <div class="editor-container">
      <div class="toolbar">
        <div class="toolbar-group" 
             v-for="group in toolbarGroups" 
             :key="group.id">
          
          <!-- 标签 -->
          <label v-if="group.label">{{ group.label }}</label>
          
          <!-- 下拉选择器 -->
          <div v-if="group.type === 'select'" 
               class="custom-select" 
               @click="toggleSelect(group.id)">
            <div class="select-trigger" :class="{ active: group.open }">
              <span class="select-text">{{ group.currentValue }}</span>
              <span class="select-arrow">▼</span>
            </div>
            <div class="select-options" v-show="group.open">
              <div class="select-option" 
                   v-for="option in group.options" 
                   :key="option.value"
                   :class="{ selected: group.currentValue === option.text }"
                   @click="selectOption(group.id, option)">
                {{ option.text }}
              </div>
            </div>
          </div>
          
          <!-- 颜色选择器 -->
          <div v-if="group.type === 'color'" 
               class="custom-color-picker" 
               @click="toggleColorPicker(group.id)">
            <div class="color-trigger" :style="{ backgroundColor: group.currentValue }"></div>
            <div class="color-options" v-show="group.open">
              <div class="color-grid">
                <div class="color-option" 
                     v-for="color in colors" 
                     :key="color"
                     :class="{ selected: group.currentValue === color }"
                     :style="{ backgroundColor: color }"
                     @click="selectColor(group.id, color)">
                </div>
              </div>
            </div>
          </div>
          
          <!-- 输入框 -->
          <input v-if="group.type === 'input'"
                 :type="group.inputType || 'text'"
                 v-model="group.value"
                 @keyup.enter="group.onEnter"
                 :placeholder="group.placeholder"
                 :class="group.className"
                 :min="group.min"
                 :max="group.max">
          
          <!-- 按钮组 -->
          <template v-if="group.type === 'buttons'">
            <button v-for="button in group.buttons"
                    :key="button.id"
                    class="btn"
                    :class="{ active: button.active }"
                    @click="button.action"
                    :title="button.title">
              <span v-html="button.content"></span>
            </button>
          </template>
        </div>
      </div>

      <div class="editor-content" 
           ref="editor" 
           contenteditable="true"
           @input="updateEditorState"
           @mouseup="updateEditorState"
           @keyup="updateEditorState"
           @focus="updateEditorState">
      </div>
    </div>
  </div>

  <!-- 引入拆分后的JS文件 -->
  <script src="heading.js"></script>
  <script src="fontSize.js"></script>
  <script src="customFontSize.js"></script>
  <script src="foreColor.js"></script>
  <script src="backColor.js"></script>
  <script src="textFormat.js"></script>
  <script src="alignment.js"></script>
  <script src="list.js"></script>
  <script src="table.js"></script>
  <script src="link.js"></script>
  <script src="fullscreen.js"></script>
  <script src="utils.js"></script>
  <script src="editor.js"></script>
</body>

</html>